<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>AS Hero!</title>

</head>
<body>
    <style>
        body {
            width: 100vw;
            height: 100vh;
            overflow: auto;
            margin: 0;
            font-family: Ubuntu, sans-serif;
        }
    </style>
    <script type="module">
        const globals = {
            handleError: err => {
                window.alert(err);
            },
        };
    </script>
    <script type="module" src = "/src/components/pips.js"></script>
    <script type="module" src = "/src/components/label.js"></script>
    <script type="module" src = "/src/components/unitCard.js"></script>
    <script type="module" src = "/src/urlHelper.js"></script>
    <script type="module" src = "/src/pages/search.js"></script>
    <script type="module" src = "/src/pages/roster.js"></script>
    <div id="pageContainer">
    </div>
    <script type="module">
        import * as urlHelper from "../src/urlHelper.js";

        navigator.serviceWorker.register("/dbServiceWorker.js").then(registration => {
            console.log(`Service worker spawned on ${registration.scope}`);
        }).catch(err => {
            globals.handleError(err);
        });
        
        window.addEventListener("hashchange", event => {
            console.log("hashChange");
            urlHelper.getParams();
        });

        window.addEventListener("popstate", event => {
            console.log("popstate");
            urlHelper.getParams();
        });

        if (!urlHelper.getParams().page) {
            urlHelper.setParams({page: "search"});
        }
    </script>
</body>
</html>
